<div class="matchs-container">
  @if (loading()) {
    <div class="loading">Chargement des matchs...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading() && !error()) {
    <div class="matchs-list">
      @for (journeeData of getMatchsByJournee(); track journeeData[0]) {
        <div class="journee-section">
          <button class="journee-title" (click)="toggleJournee(journeeData[0])" [class.open]="isJourneeOpen(journeeData[0])">
            <span>Journée {{ journeeData[0] }}</span>
            <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>

          <div class="matchs-grid" [class.collapsed]="!isJourneeOpen(journeeData[0])">
            @for (match of journeeData[1]; track match.id) {
              <div class="match-card" [class.termine]="match.statut === 'termine'" [class.a-venir]="match.statut === 'a_venir'">
                <!-- Header: Date et Statut -->
                <div class="match-header">
                  <div class="match-date-time">
                    <span class="date">{{ formatDate(match.date) }}</span>
                    @if (match.heure) {
                      <span class="heure">{{ match.heure }}</span>
                    }
                  </div>
                  <div class="match-status">
                    @if (match.statut === 'termine') {
                      <span class="badge termine">Terminé</span>
                    } @else {
                      <span class="badge a-venir">À venir</span>
                    }
                  </div>
                </div>

                <!-- Corps: Équipes et Score -->
                <div class="match-body">
                  <!-- Équipe Domicile -->
                  <div class="team-section domicile">
                    <img [src]="getTeamLogo(match.equipeDomicile)" [alt]="match.equipeDomicile" class="team-logo">
                    <span class="team-name">{{ match.equipeDomicile }}</span>
                  </div>

                  <!-- Score Central -->
                  <div class="score-section">
                    @if (match.scoreDomicile !== undefined && match.scoreExterieur !== undefined) {
                      <div class="score-display">
                        <span class="score-value">{{ match.scoreDomicile }}</span>
                        <span class="score-separator">-</span>
                        <span class="score-value">{{ match.scoreExterieur }}</span>
                      </div>
                    } @else {
                      <div class="vs-display">VS</div>
                    }
                  </div>

                  <!-- Équipe Extérieur -->
                  <div class="team-section exterieur">
                    <span class="team-name">{{ match.equipeExterieur }}</span>
                    <img [src]="getTeamLogo(match.equipeExterieur)" [alt]="match.equipeExterieur" class="team-logo">
                  </div>
                </div>

                <!-- Footer: Détail des sets -->
                @if (match.detailSets && match.detailSets.length > 0) {
                  <div class="match-footer">
                    <div class="sets-detail">
                      <span class="sets-label">Détail des sets:</span>
                      <span class="sets-scores">{{ match.detailSets.join(' • ') }}</span>
                    </div>
                  </div>
                }
              </div>
            }
          </div>
        </div>
      }
    </div>
  }
</div>

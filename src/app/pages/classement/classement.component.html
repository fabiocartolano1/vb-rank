<div class="classement-container">
  <!-- Sélecteur de championnat -->
  <app-championnat-dropdown
    [championnats]="championnats"
    [selectedValue]="selectedEquipe()"
    (selectionChange)="onChampionnatChange($event)">
  </app-championnat-dropdown>

  @if (loading()) {
    <div class="loading">Chargement du classement...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading() && !error()) {
    <div class="table-container">
      <table class="classement-table">
        <thead>
          <tr>
            <th class="rank-col">Rang</th>
            <th class="team-col">Équipe</th>
            <th class="number-col">Pts</th>
            <th class="number-col">J</th>
            <th class="number-col">G</th>
            <th class="number-col">P</th>
            <th class="number-col hide-mobile">SP</th>
            <th class="number-col hide-mobile">SC</th>
            <th class="number-col hide-mobile">Diff</th>
          </tr>
        </thead>
        <tbody>
          @for (equipe of equipes(); track equipe.id) {
            <tr [class]="getRankClass(equipe.rang)" [class.cres-team]="isCresTeam(equipe.nom)">
              <td class="rank-cell">
                <span class="rank-badge" [class]="getRankClass(equipe.rang)">
                  {{ equipe.rang }}
                </span>
              </td>
              <td class="team-cell">
                <div class="team-info">
                  <img [src]="getTeamLogo(equipe)" [alt]="equipe.nom" class="team-logo">
                  <strong>{{ equipe.nom }}</strong>
                </div>
              </td>
              <td class="points-cell">
                <strong>{{ equipe.points }}</strong>
              </td>
              <td>{{ equipe.joues }}</td>
              <td class="win-cell">{{ equipe.gagnes }}</td>
              <td class="loss-cell">{{ equipe.perdus }}</td>
              <td class="hide-mobile">{{ equipe.setsPour }}</td>
              <td class="hide-mobile">{{ equipe.setsContre }}</td>
              <td class="hide-mobile" [class.positive]="getDifference(equipe.setsPour, equipe.setsContre) > 0"
                  [class.negative]="getDifference(equipe.setsPour, equipe.setsContre) < 0">
                {{ getDifference(equipe.setsPour, equipe.setsContre) > 0 ? '+' : '' }}{{ getDifference(equipe.setsPour, equipe.setsContre) }}
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
